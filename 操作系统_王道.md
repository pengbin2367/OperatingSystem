# 第1章 计算机系统概述

> ### 考纲内容
>
> 1. 操作系统的基本概念
>
> 2. 操作系统的发展历程
>
> 3. 程序运行环境
>
>    CPU运行模式：内核模式和用户模式
>
>    中断和异常的处理；系统调用
>
>    程序的链接与装入；程序运行时内存映像与地址空间
>
> 4. 操作系统结构：分层、模块化、宏内核、微内核、外核
>
> 5. 操作系统引导
>
> 6. 虚拟机
>
> ### 复习提示
>
> 本章通常以选择题的形式考查，重点考查操作系统的功能、运行环境和提供的服务

## 1.1 操作系统的基本概念

### 1.1.1 操作系统的概念

硬件提供基本的计算资源；应用程序规定按何种方式使用这些资源来解决用户的计算问题；操作系统控制和协调各用户的应用程序对硬件的分配和使用。

> 操作系统（Operating System，OS）是指控制和管理整个计算机系统的硬件和软件资源，合理地组织、调度计算机的工作与资源的分配，进而为用户和其它软件提供方便接口与环境的**`程序集合`**。
>
> 操作系统是计算机系统中**`最基本的系统软件`**。

### 1.1.2 操作系统的特征

#### 1. 并发 Concurrence

并发是指两个或多个事件在<font style="color: mediumaquamarine">同一时间间隔内</font>发生。操作系统的并发性指的是计算机系统中同时存在多个运行的程序，它是通过分时来实现的。

> <font style="color: mediumaquamarine; font-weight: bold">并行性</font>指的是系统具有同时进行运算或操作的特性，在<font style="color: mediumaquamarine">同一时刻</font>能完成两种或两种以上的工作。

#### 2. 共享 Sharing

指系统中的资源可供内存中多个并发执行的进程同时使用，它分为一下两种资源共享方式：

- 互斥共享方式
- 同时访问方式

> 在一段时间内只允许一个进程访问的资源称为<font style="color: #409EFF; font-weight: bold">临界资源</font>或<font style="color: #409EFF; font-weight: bold">独占资源</font>。

<font style="font-weight: bold; color: red; font-size: 20px">并发</font>和<font style="font-weight: bold; color: red; font-size: 20px">共享</font>是OS两个最基本的特征，两者之间互为存在条件：

① 资源共享是以程序并发为条件的；如果系统不允许程序并发执行，则自然不存在资源共享问题。

② 如果系统不能对资源共享实施有效的管理，则必将影响到程序的并发执行，甚至根本无法并发执行。

#### 3. 虚拟 Virtual

操作系统利用了多种虚拟技术来实现虚拟处理器、虚拟内存和虚拟外部设备等。操作系统的虚拟技术可归纳为：<font style="color: mediumaquamarine">时分复用技术</font>和<font style="color: mediumaquamarine">空分复用技术</font>。

#### 3. 异步 Asynchronism

多道程序环境允许多个程序并发执行，而由于资源有限，使得进程的执行并不是一贯到底的，它以不可预知的速度前行，这就是进程的异步性。

异步性使得OS运行在一种随机的环境下，可能导致进程产生和时间相关的错误。但是，只要运行环境相同，OS就必须保证多次运行进程后都能获得相同结果。

### 1.1.3 操作系统的目标和功能

#### 1. 操作系统作为计算机系统资源的管理者

- <font style="color: mediumaquamarine; font-weight: bold">进程管理</font>：进程控制、进程同步、进程通信、死锁处理、处理机调度等
- <font style="color: mediumaquamarine; font-weight: bold">存储器管理</font>：内存分配与回收、地址映射、内存保护与共享和内存扩充等功能
- <font style="color: mediumaquamarine; font-weight: bold">文件管理</font>：文件存储空间的管理、目录管理及文件读写管理和保护等
- <font style="color: mediumaquamarine; font-weight: bold">设备管理</font>：缓冲管理、设备分配、设备处理和虚拟设备等功能

#### 2. 操作系统作为用户与计算机硬件系统之间的接口

OS为用户提供的接口主要分为两类：一类是命令接口，用户利用这些操作命令来组织和控制作业的执行；另一类是程序接口，编程人员可以使用它们来请求操作系统服务。

##### a> <font style="color: mediumaquamarine; font-weight: bold">命令接口</font>

使用命令接口进行作业控制的主要方式有两种：即联机控制方式和脱机控制方式。

联机命令接口又称为交互式命令接口，“说一句，做一句”，这就强调了交互性。

脱机命令接口又称为批处理命令接口，“说一堆，做一堆”。

##### b> <font style="color: mediumaquamarine; font-weight: bold">程序接口</font>

程序接口由一组系统调用（也称广义指令）组成。

#### 3. 操作系统作为扩充机器

## 1.2 操作系统的发展与分类

### 1.2.1 手工操作阶段（无OS）

① <font style="color: #409EFF; ">用户独占全机，资源利用率低</font>

② <font style="color: #409EFF; ">CPU等待手工操作，利用不充分</font>

### 1.2.2 批处理阶段（OS开始出现）

#### 1. 单道批处理系统

主要特征：

- <font style="color: #409EFF; font-weight: bold">自动性</font>
- <font style="color: #409EFF; font-weight: bold">顺序性</font>
- <font style="color: #409EFF; font-weight: bold">单道性</font>

<font style="color: #409EFF; ">高速的CPU经常处于等待低速的I/O完成的状态</font>

#### 2. 多道批处理系统

特点：

- <font style="color: #409EFF; font-weight: bold">多道</font>
- <font style="color: #409EFF; font-weight: bold">宏观上并行</font>
- <font style="color: #409EFF; font-weight: bold">微观上串行</font>

它的实现需要解决一下问题：

1. 如何分配处理器
2. 多道程序的内存分配问题
3. I/O设备如何分配
4. 如何组织和存放大量的程序和数据，以方便用户使用和保证其安全性与一致性

<font style="color: mediumaquamarine; font-weight: bold">优点</font>：资源利用率高、系统吞吐量大

<font style="color: mediumaquamarine; font-weight: bold">缺点</font>：用户响应的时间较长；不提供人机交互能力，用户既不能了解自己的程序的运行情况，又不能控制计算机

### 1.2.3 分时操作系统

主要特征：

- <font style="color: #409EFF; font-weight: bold">同时性</font>：允许多个终端用户同时使用一台计算机
- <font style="color: #409EFF; font-weight: bold">交互性</font>
- <font style="color: #409EFF; font-weight: bold">独立性</font>：多个用户彼此独立地进行操作
- <font style="color: #409EFF; font-weight: bold">及时性</font>：用户在短时间内就能得到响应

分时系统很好的解决了人机交互的问题，但在一些实时应用场景中表现一般。

### 1.2.4 实时操作系统

实时操作系统的主要特点是<font style="color: #409EFF; font-weight: bold">及时性</font>和<font style="color: #409EFF; font-weight: bold">可靠性</font>

### 1.2.5 网络操作系统和分布式操作系统

### 1.2.6 个人计算机操作系统

## 1.3 操作系统的运行环境

### 1.3.1 操作系统的运行机制

CPU的状态划分为<font style="color: #409EFF; ">用户态</font>（目态）和<font style="color: #409EFF; ">核心态</font>（管态、内核态）；用户自编的程序运行在用户态，操作系统内核程序运行在核心态。大多数操作系统的内核包括以下四个方面的内容：

#### 1. 时钟管理

#### 2. 中断机制

中断机制中，只有一小部分功能属于内核，它们负责保护和恢复中断现场的信息，转移控制权到相关的处理程序。

#### 3. 原语

- 处于操作系统最底层，是最接近硬件的部分
- 这些程序的运行具有原子性，其操作只能一气呵成
- 这些程序的运行时间都比较短，而且调用频繁

#### 4. 系统控制的数据结构及处理

### 1.3.2 中断和异常的概念



# 第2章 进程管理

